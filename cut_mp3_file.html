<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Test Cut Audio</title>
  </head>
  <body>
    <h1>Test Audio Cutter</h1>
    <button id="cutAudioBtn">Cut and Play Audio</button>
    <audio controls id="audioElement"></audio>

    <script type="module" src="cutAudio.js"></script>
    <script type="module">
      import { AudioData, cutAudio, to_wav } from "./cutAudio.js";

      const audioDataArray = [
        new AudioData("http://127.0.0.1:5500/test_.mp3", 10, 12),
        new AudioData("http://127.0.0.1:5500/test_.mp3", 8, 10),
        new AudioData("http://127.0.0.1:5500/test_.mp3", 4, 6),
        new AudioData("http://127.0.0.1:5500/test_.mp3", 2, 4),
        new AudioData("http://127.0.0.1:5500/test_.mp3", 0, 2),
      ];

      // Modifica il listener per gestire la promessa
      document
        .getElementById("cutAudioBtn")
        .addEventListener("click", async () => {
          // Crea un URL oggetto dal Blob
          let wavBlob = await cutAudio(audioDataArray);
          to_wav(wavBlob);
        });
    </script>
  </body>
</html>
